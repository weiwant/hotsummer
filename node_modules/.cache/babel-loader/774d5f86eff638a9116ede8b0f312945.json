{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"TeacherWorkloadTable\",\n\n  data() {\n    return {\n      academicYears: [],\n      currentAcademicYear: \"\",\n      //学年\n      currentSemester: 1,\n      //学期\n      searchKeyword: \"上课老师\",\n      searchValue: \"\",\n      workloadTableHeader: [],\n      workloadTableData: []\n    };\n  },\n\n  computed: {\n    //统计数据\n    totalClassCount() {\n      return this.workloadTableData.length; //总课程数\n    }\n\n  },\n  methods: {\n    //信息筛选\n    //学年学期筛选\n    refreshData() {\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    },\n\n    getTableData(year, semester) {\n      console.log(year);\n      console.log(semester);\n      axios({\n        method: \"get\",\n        url: `http://localhost:3000/teacherWorkload`\n      }).then(res => {\n        this.workloadTableHeader = res.data.workloadTableHeader;\n        this.workloadTableData = res.data.workloadTableData;\n      });\n    },\n\n    //搜索\n    search() {\n      console.log(this.searchKeyword);\n      console.log(this.searchValue);\n      if (this.searchValue == \"\") return;\n    }\n\n  },\n\n  created() {\n    //向后台获取学年列表\n    axios({\n      method: \"get\",\n      url: `http://localhost:3000/academicYearList`\n    }).then(res => {\n      this.academicYears = res.data; // console.log(res.data[0]);\n      //设置默认学年学期\n\n      this.currentAcademicYear = res.data[0];\n      this.currentSemester = 1; //调用getTableData()方法获取数据\n\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    });\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;EACAA,4BADA;;EAEAC;IACA;MACAC,iBADA;MAEAC,uBAFA;MAEA;MACAC,kBAHA;MAGA;MACAC,qBAJA;MAKAC,eALA;MAMAC,uBANA;MAOAC;IAPA;EASA,CAZA;;EAaAC;IACA;IACAC;MACA,qCADA,CACA;IACA;;EAJA,CAbA;EAmBAC;IACA;IACA;IACAC;MACA;IACA,CALA;;IAMAC;MACAC;MACAA;MACAC;QACAC,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGAC;QACA;QACA;MACA,CANA;IAOA,CAhBA;;IAiBA;IACAC;MACAN;MACAA;MACA;IACA;;EAtBA,CAnBA;;EA2CAO;IACA;IACAN;MACAC,aADA;MAEAC;IAFA,GAGAC,IAHA,CAGAC;MACA,8BADA,CAEA;MACA;;MACA;MACA,yBALA,CAMA;;MACA;IACA,CAXA;EAYA;;AAzDA","names":["name","data","academicYears","currentAcademicYear","currentSemester","searchKeyword","searchValue","workloadTableHeader","workloadTableData","computed","totalClassCount","methods","refreshData","getTableData","console","axios","method","url","then","res","search","created"],"sourceRoot":"src/components/HSH/manager","sources":["WorkloadTableForManager.vue"],"sourcesContent":["<template>\n  <div id=\"workloadDisplay\">\n    <!--component标题-->\n    <div class=\"sectionTitle\">教学工作量</div>\n    <!--上传文件-->\n    <div class=\"uploadSection\">\n      <div class=\"segment\"></div>\n      <div class=\"segment\"></div>\n      <button class=\"upload\"> 导出Excel至本地</button>\n    </div>\n\n    <!--查看已上传信息-->\n    <!--学年和学期筛选-->\n    <div class=\"tableFilter\">\n      <div class=\"segment\">\n        <label for=\"year\">学年</label>\n        <select v-model=\"currentAcademicYear\" id=\"year\" @change=\"refreshData()\">\n          <option v-for=\"item in academicYears\" :key=\"item.id\" :value=\"item\">\n            {{ item }}\n          </option>\n        </select>\n      </div>\n      <div class=\"segment\">\n        <label for=\"semester\">学期</label>\n        <select v-model=\"currentSemester\" id=\"semester\" @change=\"refreshData()\">\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n        </select>\n      </div>\n      <div class=\"segment\">\n        <select class=\"search\" v-model=\"searchKeyword\" id=\"\">\n          <option>上课老师</option>\n          <option>计划学院</option>\n        </select>\n        <input\n          class=\"search\"\n          type=\"search\"\n          v-model=\"searchValue\"\n          placeholder=\"查询内容\"\n          @keyup.enter=\"search()\"\n        />\n        <button class=\"search searchBtn\" @click=\"search()\"></button>\n      </div>\n    </div>\n    <!--统计数据栏-->\n    <div class=\"statistics\">\n      <ul>\n        <li>\n          <div class=\"name\">总课程数</div>\n          <div class=\"value\">{{ totalClassCount }}</div>\n        </li>\n        <li>\n          <div class=\"name\">XXX</div>\n          <div class=\"value\">yyyy</div>\n        </li>\n      </ul>\n    </div>\n    <!--工具栏-->\n    <div class=\"toolBar\">\n      <button class=\"download\"> 导出Excel至本地</button>\n    </div>\n    <!--数据列表-->\n    <div class=\"workloadTableWrapper\">\n      <table class=\"workloadDataTable\">\n        <thead>\n          <tr>\n            <th v-for=\"item in workloadTableHeader\" :key=\"item.id\">\n              {{ item }}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            class=\"tableDataLine\"\n            v-for=\"item in workloadTableData\"\n            :key=\"item.id\"\n          >\n            <td v-for=\"value in item\" :key=\"value.id\">{{ value }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"TeacherWorkloadTable\",\n  data() {\n    return {\n      academicYears: [],\n      currentAcademicYear: \"\", //学年\n      currentSemester: 1, //学期\n      searchKeyword: \"上课老师\",\n      searchValue: \"\",\n      workloadTableHeader: [],\n      workloadTableData: [],\n    };\n  },\n  computed: {\n    //统计数据\n    totalClassCount() {\n      return this.workloadTableData.length; //总课程数\n    },\n  },\n  methods: {\n    //信息筛选\n    //学年学期筛选\n    refreshData() {\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    },\n    getTableData(year, semester) {\n      console.log(year);\n      console.log(semester);\n      axios({\n        method: \"get\",\n        url: `http://localhost:3000/teacherWorkload`,\n      }).then((res) => {\n        this.workloadTableHeader = res.data.workloadTableHeader;\n        this.workloadTableData = res.data.workloadTableData;\n      });\n    },\n    //搜索\n    search() {\n      console.log(this.searchKeyword);\n      console.log(this.searchValue);\n      if (this.searchValue == \"\") return;\n    },\n  },\n  created() {\n    //向后台获取学年列表\n    axios({\n      method: \"get\",\n      url: `http://localhost:3000/academicYearList`,\n    }).then((res) => {\n      this.academicYears = res.data;\n      // console.log(res.data[0]);\n      //设置默认学年学期\n      this.currentAcademicYear = res.data[0];\n      this.currentSemester = 1;\n      //调用getTableData()方法获取数据\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    });\n  },\n};\n</script>\n\n<style scoped>\n* {\n  list-style: none;\n  text-decoration: none;\n  margin: 0;\n  padding: 0;\n}\n#workloadDisplay {\n  float: left;\n  overflow: hidden;\n  width: 85vw;\n  height: 80vh;\n  padding: 10px 15px;\n  background-color: rgb(239, 241, 247);\n}\n.sectionTitle {\n  text-align: left;\n  font-size: 27px;\n  font-weight: 600;\n  color: rgb(29, 74, 51);\n  height: 50px;\n  line-height: 50px;\n}\ninput:focus {\n  outline: none;\n}\n/* 上传文件板块 */\n.uploadSection {\n  margin-bottom: 5px;\n  padding-right: 15px;\n  padding: 5px 15px;\n  background-color: #fff;\n  border-radius: 5px;\n  text-align: left;\n}\n/* 筛选栏 */\n.tableFilter {\n  font-size: 14px;\n  margin-bottom: 5px;\n  text-align: left;\n}\n.tableFilter .segment {\n  display: inline-block;\n  margin-right: 10px;\n  padding: 8px;\n  border-radius: 5px;\n}\n.tableFilter select {\n  height: 20px;\n}\n.tableFilter label {\n  margin-right: 3px;\n}\n.tableFilter .search {\n  height: 30px;\n  border: 0px;\n  background-color: #fff;\n}\n.tableFilter select.search {\n  vertical-align: bottom;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n}\n.tableFilter input.search {\n  padding-left: 10px;\n}\n.tableFilter button.searchBtn {\n  width: 35px;\n  vertical-align: bottom;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  font-family: \"icomoon\";\n  color: #fff;\n  background-color: rgba(41, 34, 106);\n}\n.tableFilter button.searchBtn:hover {\n  background-color: rgba(41, 34, 106, 0.815);\n}\n/* 统计数据 */\n.statistics {\n  background-color: #fff;\n  border-radius: 5px;\n  margin-bottom: 5px;\n}\n.statistics ul {\n  padding: 5px 15px;\n  text-align: left;\n  padding: 10px;\n}\n.statistics li {\n  display: inline-block;\n  padding: 5px 30px;\n  text-align: center;\n  border-right: 1px solid rgba(128, 128, 128, 0.212);\n}\n.statistics li .name {\n  font-size: 10px;\n}\n.statistics li .value {\n  font-size: 20px;\n  font-weight: 500;\n}\n/*工具栏*/\n.toolBar {\n  margin-bottom: 5px;\n  padding-right: 15px;\n  padding: 5px 15px;\n  background-color: #fff;\n  border-radius: 5px;\n  text-align: right;\n}\n.toolBar button.download {\n  padding: 5px;\n  border: 1px solid rgba(128, 128, 128, 0.452);\n  border-radius: 5px;\n  background-color: rgb(255, 254, 254);\n  font-family: \"icomoon\";\n  color: rgb(51, 114, 96);\n  font-weight: 500;\n}\n.toolBar button.download:hover {\n  background-color: rgba(209, 207, 207, 0.479);\n}\n/* 数据列表 */\n.workloadTableWrapper {\n  position: relative;\n  overflow: scroll;\n  height: 60vh;\n}\ntable.workloadDataTable {\n  width: 1300px;\n}\n.workloadDataTable thead {\n  position: sticky;\n  top: 0;\n  font-size: 10px;\n  font-weight: 500;\n  background-color: rgb(239, 241, 247);\n}\n.workloadDataTable tbody {\n  background-color: #fff;\n  padding: 3px 5px;\n}\n@media screen and (max-width: 1000px) and (min-width: 600px) {\n  #workloadDisplay {\n    width: 77vw;\n  }\n}\n@media screen and (max-width: 600px) {\n  #workloadDisplay {\n    width: 100vw;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}