{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"TeacherWorkloadTable\",\n\n  data() {\n    return {\n      uploadFileYearInfo1: \"2021\",\n      uploadFileSemesterInfo: 1,\n      academicYears: [],\n      currentAcademicYear: \"\",\n      //学年\n      currentSemester: 1,\n      //学期\n      searchFilterRequired: false,\n      searchKeyword: \"上课老师\",\n      searchValue: \"\",\n      workloadTableHeader: [],\n      workloadTableData: []\n    };\n  },\n\n  computed: {\n    //统计数据\n    totalClassCount() {\n      return this.workloadDataToBeDisplayed.length; //总课程数\n    },\n\n    uploadFileYearInfo2() {\n      return Number(this.uploadFileYearInfo1) + 1;\n    },\n\n    //列表数据\n    workloadDataToBeDisplayed() {\n      console.log(\"computing\");\n      if (!this.searchFilterRequired) return this.workloadTableData;else {\n        switch (this.searchKeyword) {\n          case \"上课老师\":\n            return this.workloadTableData.filter(item => item.teacher == `${this.searchValue}`);\n\n          case \"计划学院\":\n            return this.workloadTableData.filter(item => item.planFaculty == `${this.searchValue}`);\n        }\n      }\n    }\n\n  },\n  methods: {\n    //信息筛选\n    //学年学期筛选\n    refreshData() {\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    },\n\n    getTableData(year, semester) {\n      console.log(year);\n      console.log(semester);\n      axios({\n        method: \"get\",\n        url: `http://localhost:3000/teacherWorkload`\n      }).then(res => {\n        this.workloadTableHeader = res.data.workloadTableHeader;\n        this.workloadTableData = res.data.workloadTableData;\n      });\n    },\n\n    //搜索\n    search() {\n      console.log(this.searchKeyword);\n      console.log(this.searchValue);\n      if (this.searchValue == \"\") this.searchFilterRequired = false;else {\n        this.searchFilterRequired = true;\n      }\n    }\n\n  },\n\n  created() {\n    //向后台获取学年列表\n    axios({\n      method: \"get\",\n      url: `http://localhost:3000/academicYearList`\n    }).then(res => {\n      this.academicYears = res.data; // console.log(res.data[0]);\n      //设置默认学年学期\n\n      this.currentAcademicYear = res.data[0];\n      this.currentSemester = 1; //调用getTableData()方法获取数据\n\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\n    });\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;EACAA,4BADA;;EAEAC;IACA;MACAC,2BADA;MAEAC,yBAFA;MAGAC,iBAHA;MAIAC,uBAJA;MAIA;MACAC,kBALA;MAKA;MACAC,2BANA;MAOAC,qBAPA;MAQAC,eARA;MASAC,uBATA;MAUAC;IAVA;EAYA,CAfA;;EAgBAC;IACA;IACAC;MACA,6CADA,CACA;IACA,CAJA;;IAKAC;MACA;IACA,CAPA;;IAQA;IACAC;MACAC;MACA,mEACA;QACA;UACA;YACA,qCACAC,6CADA;;UAGA;YACA,qCACAA,iDADA;QANA;MAUA;IACA;;EAxBA,CAhBA;EA0CAC;IACA;IACA;IACAC;MACA;IACA,CALA;;IAMAC;MACAJ;MACAA;MACAK;QACAC,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGAC;QACA;QACA;MACA,CANA;IAOA,CAhBA;;IAiBA;IACAC;MACAV;MACAA;MACA,mEACA;QACA;MACA;IACA;;EAzBA,CA1CA;;EAqEAW;IACA;IACAN;MACAC,aADA;MAEAC;IAFA,GAGAC,IAHA,CAGAC;MACA,8BADA,CAEA;MACA;;MACA;MACA,yBALA,CAMA;;MACA;IACA,CAXA;EAYA;;AAnFA","names":["name","data","uploadFileYearInfo1","uploadFileSemesterInfo","academicYears","currentAcademicYear","currentSemester","searchFilterRequired","searchKeyword","searchValue","workloadTableHeader","workloadTableData","computed","totalClassCount","uploadFileYearInfo2","workloadDataToBeDisplayed","console","item","methods","refreshData","getTableData","axios","method","url","then","res","search","created"],"sourceRoot":"src/components/HSH/manager","sources":["WorkloadTableForManager.vue"],"sourcesContent":["<template>\r\n  <div id=\"workloadDisplay\">\r\n    <!--component标题-->\r\n    <div class=\"sectionTitle\">教学工作量管理</div>\r\n    <!--上传文件-->\r\n    <div class=\"subtitle\">信息导入</div>\r\n    <div class=\"uploadSection\">\r\n      <div class=\"segment\">\r\n        <label for=\"year\">学年:&nbsp;</label>\r\n        <select id=\"year\" v-model=\"uploadFileYearInfo1\">\r\n          <option v-for=\"index in 5\" :key=\"index\">\r\n            {{ 2023 - index }}\r\n          </option>\r\n        </select>\r\n        - {{ uploadFileYearInfo2 }}\r\n      </div>\r\n      <div class=\"segment\">\r\n        <label for=\"semester\">学期:&nbsp;&nbsp;</label>\r\n        <select id=\"semester\" v-model=\"uploadFileSemesterInfo\">\r\n          <option>1</option>\r\n          <option>2</option>\r\n          <option>3</option>\r\n        </select>\r\n      </div>\r\n      <button class=\"upload\">&nbsp;上传工作量excel文件</button>\r\n    </div>\r\n    <!--查看已上传信息-->\r\n    <div class=\"subtitle\">信息查询</div>\r\n    <!--学年和学期筛选-->\r\n    <div class=\"tableFilter\">\r\n      <div class=\"segment\">\r\n        <label for=\"year\">学年</label>\r\n        <select v-model=\"currentAcademicYear\" id=\"year\">\r\n          <option v-for=\"item in academicYears\" :key=\"item.id\" :value=\"item\">\r\n            {{ item }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"segment\">\r\n        <label for=\"semester\">学期</label>\r\n        <select v-model=\"currentSemester\" id=\"semester\">\r\n          <option value=\"1\">1</option>\r\n          <option value=\"2\">2</option>\r\n          <option value=\"3\">3</option>\r\n        </select>\r\n      </div>\r\n      <button class=\"confirmYearAndSemesterBtn\" @click=\"refreshData()\">\r\n        确&nbsp;认\r\n      </button>\r\n      <div class=\"segment\">\r\n        <select class=\"search\" v-model=\"searchKeyword\" id=\"\">\r\n          <option>上课老师</option>\r\n          <option>计划学院</option>\r\n        </select>\r\n        <!-- 搜索框 -->\r\n        <input\r\n          class=\"search\"\r\n          type=\"search\"\r\n          v-model=\"searchValue\"\r\n          placeholder=\"查询内容\"\r\n          @keyup.enter=\"search()\"\r\n        />\r\n        <button class=\"search searchBtn\" @click=\"search()\"></button>\r\n      </div>\r\n    </div>\r\n    <!--统计数据栏-->\r\n    <div class=\"statistics\">\r\n      <ul>\r\n        <li>\r\n          <div class=\"name\">总课程数</div>\r\n          <div class=\"value\">{{ totalClassCount }}</div>\r\n        </li>\r\n        <li>\r\n          <div class=\"name\">XXX</div>\r\n          <div class=\"value\">yyyy</div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--工具栏-->\r\n    <div class=\"toolBar\">\r\n      <button class=\"download\"> 导出Excel至本地</button>\r\n    </div>\r\n    <!--数据列表-->\r\n    <div class=\"workloadTableWrapper\">\r\n      <table class=\"workloadDataTable\">\r\n        <thead>\r\n          <tr>\r\n            <th v-for=\"item in workloadTableHeader\" :key=\"item.id\">\r\n              {{ item }}\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            class=\"tableDataLine\"\r\n            v-for=\"item in workloadDataToBeDisplayed\"\r\n            :key=\"item.id\"\r\n          >\r\n            <td v-for=\"value in item\" :key=\"value.id\">{{ value }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"TeacherWorkloadTable\",\r\n  data() {\r\n    return {\r\n      uploadFileYearInfo1: \"2021\",\r\n      uploadFileSemesterInfo: 1,\r\n      academicYears: [],\r\n      currentAcademicYear: \"\", //学年\r\n      currentSemester: 1, //学期\r\n      searchFilterRequired: false,\r\n      searchKeyword: \"上课老师\",\r\n      searchValue: \"\",\r\n      workloadTableHeader: [],\r\n      workloadTableData: [],\r\n    };\r\n  },\r\n  computed: {\r\n    //统计数据\r\n    totalClassCount() {\r\n      return this.workloadDataToBeDisplayed.length; //总课程数\r\n    },\r\n    uploadFileYearInfo2() {\r\n      return Number(this.uploadFileYearInfo1) + 1;\r\n    },\r\n    //列表数据\r\n    workloadDataToBeDisplayed() {\r\n      console.log(\"computing\");\r\n      if (!this.searchFilterRequired) return this.workloadTableData;\r\n      else {\r\n        switch (this.searchKeyword) {\r\n          case \"上课老师\":\r\n            return this.workloadTableData.filter(\r\n              (item) => item.teacher == `${this.searchValue}`\r\n            );\r\n          case \"计划学院\":\r\n            return this.workloadTableData.filter(\r\n              (item) => item.planFaculty == `${this.searchValue}`\r\n            );\r\n        }\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    //信息筛选\r\n    //学年学期筛选\r\n    refreshData() {\r\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\r\n    },\r\n    getTableData(year, semester) {\r\n      console.log(year);\r\n      console.log(semester);\r\n      axios({\r\n        method: \"get\",\r\n        url: `http://localhost:3000/teacherWorkload`,\r\n      }).then((res) => {\r\n        this.workloadTableHeader = res.data.workloadTableHeader;\r\n        this.workloadTableData = res.data.workloadTableData;\r\n      });\r\n    },\r\n    //搜索\r\n    search() {\r\n      console.log(this.searchKeyword);\r\n      console.log(this.searchValue);\r\n      if (this.searchValue == \"\") this.searchFilterRequired = false;\r\n      else {\r\n        this.searchFilterRequired = true;\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    //向后台获取学年列表\r\n    axios({\r\n      method: \"get\",\r\n      url: `http://localhost:3000/academicYearList`,\r\n    }).then((res) => {\r\n      this.academicYears = res.data;\r\n      // console.log(res.data[0]);\r\n      //设置默认学年学期\r\n      this.currentAcademicYear = res.data[0];\r\n      this.currentSemester = 1;\r\n      //调用getTableData()方法获取数据\r\n      this.getTableData(this.currentAcademicYear, this.currentSemester);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#workloadDisplay {\r\n  float: left;\r\n  overflow-y: auto;\r\n  width: 85vw;\r\n  height: 100vh;\r\n  padding: 10px 15px;\r\n  background-color: rgb(239, 241, 247);\r\n}\r\n#workloadDisplay::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n#workloadDisplay {\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.sectionTitle {\r\n  text-align: left;\r\n  font-size: 27px;\r\n  font-weight: 600;\r\n  color: rgb(29, 74, 51);\r\n  height: 50px;\r\n  line-height: 50px;\r\n  margin-bottom: 3vh;\r\n}\r\n.subtitle {\r\n  margin-top: 3vh;\r\n  margin-bottom: 2vh;\r\n  width: 40%;\r\n  border-bottom: 1px solid rgba(128, 128, 128, 0.3);\r\n  text-align: left;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 上传文件板块 */\r\n.uploadSection {\r\n  margin-bottom: 5px;\r\n  padding-right: 15px;\r\n  padding: 5px 15px;\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  text-align: left;\r\n  height: 10vh;\r\n}\r\n.uploadSection .segment {\r\n  display: inline-block;\r\n  margin-right: 5%;\r\n}\r\n.uploadSection .segment {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n.uploadSection button.upload {\r\n  display: block;\r\n  margin-top: 2%;\r\n  padding: 5px;\r\n  border: 1px solid rgba(128, 128, 128, 0.452);\r\n  border-radius: 5px;\r\n  background-color: rgb(255, 254, 254);\r\n  font-family: \"icomoon\";\r\n  color: rgb(51, 114, 96);\r\n  font-weight: 500;\r\n}\r\n\r\n.uploadSection button.upload:hover {\r\n  background-color: rgba(209, 207, 207, 0.479);\r\n}\r\n\r\n/* 筛选栏 */\r\n.tableFilter {\r\n  font-size: 14px;\r\n  margin-bottom: 5px;\r\n  text-align: left;\r\n}\r\n.tableFilter .segment {\r\n  display: inline-block;\r\n  margin-right: 10px;\r\n  padding: 8px;\r\n  border-radius: 5px;\r\n}\r\n.tableFilter select {\r\n  height: 20px;\r\n}\r\n.tableFilter label {\r\n  margin-right: 3px;\r\n}\r\n.tableFilter .confirmYearAndSemesterBtn {\r\n  /* margin-left: 10px; */\r\n  margin-right: 10%;\r\n  width: 50px;\r\n  height: 25px;\r\n  border: 1px solid rgba(128, 128, 128, 0.555);\r\n  border-radius: 5px;\r\n  color: #fff;\r\n  font-weight: 550;\r\n  background-color: rgba(41, 34, 106);\r\n}\r\n.tableFilter .confirmYearAndSemesterBtn:hover {\r\n  background-color: rgba(41, 34, 106, 0.815);\r\n}\r\n/* .tableFilter .searchSegment {\r\n  margin-right: 10px;\r\n  padding: 8px;\r\n  border-radius: 5px;\r\n} */\r\n.tableFilter .search {\r\n  height: 30px;\r\n  border: 0px;\r\n  background-color: #fff;\r\n}\r\n.tableFilter select.search {\r\n  vertical-align: bottom;\r\n  border-top-left-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n}\r\n.tableFilter input.search {\r\n  padding-left: 10px;\r\n}\r\n.tableFilter button.searchBtn {\r\n  width: 35px;\r\n  vertical-align: bottom;\r\n  border-top-right-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n  font-family: \"icomoon\";\r\n  color: #fff;\r\n  background-color: rgba(41, 34, 106);\r\n}\r\n.tableFilter button.searchBtn:hover {\r\n  background-color: rgba(41, 34, 106, 0.815);\r\n}\r\n/* 统计数据 */\r\n.statistics {\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n.statistics ul {\r\n  padding: 5px 15px;\r\n  text-align: left;\r\n  padding: 10px;\r\n}\r\n.statistics li {\r\n  display: inline-block;\r\n  padding: 5px 30px;\r\n  text-align: center;\r\n  border-right: 1px solid rgba(128, 128, 128, 0.212);\r\n}\r\n.statistics li .name {\r\n  font-size: 10px;\r\n}\r\n.statistics li .value {\r\n  font-size: 20px;\r\n  font-weight: 500;\r\n}\r\n/*工具栏*/\r\n.toolBar {\r\n  margin-bottom: 5px;\r\n  padding-right: 15px;\r\n  padding: 5px 15px;\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  text-align: right;\r\n}\r\n.toolBar button.download {\r\n  padding: 5px;\r\n  border: 1px solid rgba(128, 128, 128, 0.452);\r\n  border-radius: 5px;\r\n  background-color: rgb(255, 254, 254);\r\n  font-family: \"icomoon\";\r\n  color: rgb(51, 114, 96);\r\n  font-weight: 500;\r\n}\r\n.toolBar button.download:hover {\r\n  background-color: rgba(209, 207, 207, 0.479);\r\n}\r\n/* 数据列表 */\r\n.workloadTableWrapper {\r\n  position: relative;\r\n  overflow: scroll;\r\n  height: 60vh;\r\n}\r\ntable.workloadDataTable {\r\n  width: 1300px;\r\n}\r\n.workloadDataTable thead {\r\n  position: sticky;\r\n  top: 0;\r\n  font-size: 10px;\r\n  font-weight: 500;\r\n  background-color: rgb(239, 241, 247);\r\n}\r\n.workloadDataTable tbody {\r\n  background-color: #fff;\r\n  padding: 3px 5px;\r\n}\r\n@media screen and (max-width: 1000px) and (min-width: 600px) {\r\n  #workloadDisplay {\r\n    width: 77vw;\r\n  }\r\n}\r\n@media screen and (max-width: 600px) {\r\n  #workloadDisplay {\r\n    width: 100vw;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}