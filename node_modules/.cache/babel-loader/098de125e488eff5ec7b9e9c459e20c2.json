{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      file: '',\n      year: '',\n      semester: ''\n    };\n  },\n\n  methods: {\n    gotoCheck() {\n      this.$router.push('/checktable'); //暂无正确的查看报表页面\n    },\n\n    uploadMaterial() {\n      this.$refs.file.dispatchEvent(new MouseEvent('click'));\n    },\n\n    //触发选择文件，判断文件类型\n    getFileData(file) {\n      const inputFile = this.$refs.file;\n      let filename = this.$data.file;\n      const isExcel = filename.substring(filename.lastIndexOf('.') + 1);\n\n      if (isExcel != \"xls\" && isExcel != \"xlsx\") {\n        alert(\"文件格式不对，请选择.xls或.xlsx文件！\");\n      } else {\n        console.log(inputFile);\n        this.uploadFile(inputFile);\n      }\n    },\n\n    //上传文件，学年，学期\n    uploadFile(file) {\n      var formData = new FormData();\n      console.log(file);\n      formData.append(\"excelFile\", file);\n      formData.append(\"year\", this.$data.year);\n      formData.append(\"semester\", this.$data.semester);\n      console.log(formData.get(\"file\", \"year\", \"semester\"));\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AAEA;EACAA;IACA;MACAC,QADA;MAEAC,QAFA;MAGAC;IAHA;EAKA,CAPA;;EASAC;IAEAC;MACA,iCADA,CACA;IACA,CAJA;;IAMAC;MACA;IACA,CARA;;IAUA;IACAC;MACA;MACA;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACAC;QACA;MACA;IACA,CArBA;;IAuBA;IACAC;MACA;MACAD;MACAE;MACAA;MACAA;MACAF;IACA;;EA/BA;AATA","names":["data","file","year","semester","methods","gotoCheck","uploadMaterial","getFileData","alert","console","uploadFile","formData"],"sourceRoot":"src/components/LJY","sources":["Managerhome.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-menu\r\n  :default-active= 1\r\n  class=\"el-menu-demo\"\r\n  mode=\"horizontal\"\r\n  background-color=\"#00a183\"\r\n  text-color=\"#fff\"\r\n  active-text-color=\"#ffd04b\">\r\n  <el-menu-item index=\"1\" \r\n  @click=\"gotoCheck\">查看报表</el-menu-item>\r\n</el-menu>\r\n\r\n<!-- 后端对接时在upload后面加 :action=\"url接口\"，询问返回值确定是否成功信息 -->\r\n<el-input\r\ntype=\"file\"\r\nref=\"file\"\r\nname=\"file\"\r\nv-model=\"file\"\r\n@click=\"e => {e.target.value = '';}\"\r\n@change=\"getFileData\"\r\nmultiple=\"false\"\r\naccept=\".xls,.xlsx\">上传报表</el-input>\r\n<el-input v-model=\"year\">学年</el-input>\r\n<el-input v-model=\"semester\">学期</el-input>\r\n\r\n<el-main>\r\n  <router-view></router-view>\r\n</el-main>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default{\r\n\tdata(){\r\n\t\treturn{\r\n      file: '',\r\n      year: '',\r\n      semester: ''\r\n    }\r\n\t},\r\n\r\n  methods: {\r\n\r\n    gotoCheck(){\r\n      this.$router.push('/checktable');  //暂无正确的查看报表页面\r\n    },\r\n\r\n    uploadMaterial(){\r\n      this.$refs.file.dispatchEvent(new MouseEvent('click'));\r\n    },\r\n\r\n    //触发选择文件，判断文件类型\r\n    getFileData(file){\r\n      const inputFile = this.$refs.file;\r\n      let filename = this.$data.file;\r\n      const isExcel = filename.substring(filename.lastIndexOf('.')+ 1);\r\n      if(isExcel != \"xls\" && isExcel != \"xlsx\"){\r\n        alert(\"文件格式不对，请选择.xls或.xlsx文件！\");\r\n      }else{\r\n        console.log(inputFile);\r\n        this.uploadFile(inputFile);\r\n      }\r\n    },\r\n\r\n    //上传文件，学年，学期\r\n    uploadFile(file){\r\n      var formData = new FormData();\r\n      console.log(file);\r\n      formData.append(\"excelFile\",file);\r\n      formData.append(\"year\", this.$data.year);\r\n      formData.append(\"semester\", this.$data.semester);\r\n      console.log(formData.get(\"file\",\"year\",\"semester\"));\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}